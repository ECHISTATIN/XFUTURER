{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/jiang/Documents/GitHub/XFUTURER/src/components/mobile/NewsDetailsContent.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useEffect, useState, Suspense } from \"react\";\n\ninterface NewsData {\n  id: number;\n  title: string;\n  title_cn: string;\n  title_en: string;\n  content: string;\n  content_cn: string;\n  content_en: string;\n  publishDate: string;\n  status: number;\n  category: string; // 新增字段 category\n  imageBase64: string; // 新增字段 imageUrl，用于存储图片的 URL\n}\ninterface Translations {\n  [key: string]: any; // 根据你的翻译文件结构调整类型\n}\nexport default function DetailsPage({\n  lang:lang,\n  translations: t,\n}: {\n  lang: string;\n  translations: Translations;\n}) {\n  function NewsDetails() {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n\n    // 获取 section, index, 和 category 参数\n    const section = searchParams?.get(\"section\") || \"a\";\n    const index = parseInt(searchParams?.get(\"index\") || \"0\", 10);\n    const category = searchParams?.get(\"category\") || section; // 默认 category 为 section\n\n    const [currentIndex, setCurrentIndex] = useState(index);\n    const [newsData, setNewsData] = useState<NewsData[]>([]);\n    const [filteredNewsData, setFilteredNewsData] = useState<NewsData[]>([]); // 用于存储过滤后的数据\n    const [loading, setLoading] = useState(true);\n\n    const formatDate = (date: string) => {\n      const parsedDate = new Date(date);\n      const year = parsedDate.getFullYear(); // 直接获取完整年份\n      const month = (parsedDate.getMonth() + 1).toString().padStart(2, \"0\");\n      const day = parsedDate.getDate().toString().padStart(2, \"0\");\n\n      return `${year}/${month}/${day}`; // 用 \"/\" 代替 \"-\"\n    };\n\n    // 根据 section 获取新闻数据\n    const fetchNewsData = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch(`/api/news?section=${section}`);\n        const result = await response.json();\n\n        // 打印从 API 获取的数据\n        console.log(\"Fetched news data:\", newsData);\n\n        if (result.code === 200 && result.data) {\n          setNewsData(result.data); // 设置整个新闻数据\n\n          // 过滤符合 category 和 section 条件的新闻\n          const filtered = result.data.filter(\n            (news: NewsData) => news.category === category\n          );\n          setFilteredNewsData(filtered); // 设置过滤后的数据\n        } else {\n          console.error(\"Failed to load news data:\", result.message);\n        }\n      } catch (error) {\n        console.error(\"Error fetching news data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    useEffect(() => {\n      // 当 section 改变时重新加载新闻数据\n      fetchNewsData();\n    }, [section, category]);\n\n    useEffect(() => {\n      fetchNewsData();\n    }, [section, category, t.language]); // 监听语言变化\n\n    useEffect(() => {\n      setCurrentIndex(index);\n    }, [index]);\n\n    // 获取当前新闻\n    const currentNews = filteredNewsData[currentIndex];\n\n    // 打印当前新闻数据\n    useEffect(() => {\n      console.log(\"Current Index:\", currentIndex);\n      console.log(\"Filtered News Data:\", filteredNewsData);\n      if (currentNews) {\n        console.log(\"Current news:\", currentNews);\n      } else {\n        console.log(\"No current news, possibly invalid index.\");\n      }\n    }, [currentIndex, filteredNewsData]);\n\n    const goToPrevious = () => {\n      if (currentIndex > 0) {\n        const newIndex = currentIndex - 1;\n        setCurrentIndex(newIndex);\n        router.push(\n          `/mobile/route/news/details?section=${section}&index=${newIndex}&category=${category}`\n        );\n      }\n    };\n\n    const goToNext = () => {\n      if (currentIndex < filteredNewsData.length - 1) {\n        const newIndex = currentIndex + 1;\n        setCurrentIndex(newIndex);\n        router.push(\n          `/mobile/route/news/details?section=${section}&index=${newIndex}&category=${category}`\n        );\n      }\n    };\n\n    const goBackToList = () => {\n      router.push(`/${lang}/mobile/route/news`);\n    };\n\n    if (loading) {\n      return <div>Loading...</div>;\n    }\n\n    if (!currentNews) {\n      return <div>{t.news.noContent}</div>;\n    }\n\n    return (\n      <div>\n        <div className=\"route-select\">\n          <div className=\"route-f1\"> {t.news.title}</div>\n          <div className=\"route-line\">\n            <span className=\"route-f2\">{t.news.home}</span>\n            <img src=\"/images/Polygon2.png\" alt=\"Contact\" />\n            <span className=\"route-f3\" style={{ color: \"#1A1A1A\" }}>\n              {t.news.title2}\n            </span>\n            <img src=\"/images/Polygon2.png\" alt=\"Contact\" />\n            <span className=\"route-f3\">{t.news.title3}</span>\n          </div>\n        </div>\n        <div className=\"news-page\">\n          <div className=\"c-title\">\n            <div className=\"c-time\">{formatDate(currentNews.publishDate)}</div>\n            <div className=\"pnews-tt\">\n              {section === \"a\" ? t.news.option1 : t.news.option2}\n            </div>\n          </div>\n          <div className=\"psummary\">\n            {t.language === \"en\"\n              ? currentNews.title_en\n              : t.language === \"zh\"\n              ? currentNews.title_cn\n              : t.language === \"ja\"\n              ? currentNews.title\n              : currentNews.title}{\" \"}\n            {/* 默认显示 currentNews.content */}\n          </div>\n          <div className=\"summary-line\"></div>\n          <div className=\"pnews-text\">\n            {t.language === \"en\"\n              ? currentNews.content_en\n              : t.language === \"zh\"\n              ? currentNews.content_cn\n              : t.language === \"ja\"\n              ? currentNews.content\n              : currentNews.content}{\" \"}\n            {/* 默认显示 currentNews.content */}\n          </div>\n\n          {/* 渲染图片 */}\n          {/* 渲染图片 */}\n          {currentNews.imageBase64 ? (\n            <div className=\"news-image\">\n              <img src={currentNews.imageBase64} alt={currentNews.title} />\n            </div>\n          ) : (\n            <div></div>\n          )}\n\n          <div>\n            <div className=\"summary-line\"></div>\n            <div className=\"navigation-buttons\">\n              <div className=\"bts-line\"></div>\n              <button\n                onClick={goToPrevious}\n                disabled={currentIndex === 0}\n                className=\"bts\"\n                style={{ marginLeft: \"25.85px\" }}\n              >\n                Prev\n              </button>\n              <button\n                onClick={goToNext}\n                disabled={currentIndex === filteredNewsData.length - 1}\n                className=\"bts\"\n                style={{ marginRight: \"14px\", marginLeft: \"332px\" }}\n              >\n                Next\n              </button>\n              <div className=\"bts-line\"></div>\n            </div>\n            <button onClick={goBackToList} className=\"goback\">\n              {t.news.goback}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <NewsDetails />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/jiang/Documents/GitHub/XFUTURER/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}